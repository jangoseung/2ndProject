<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smhrd.db.Mapper">

	<select id="login">
		SELECT USER_ID, USER_NAME, USER_ROLE FROM TB_USER
		WHERE UESER_ID=? AND USER_PW=?
	</select>

	<insert id="sign">
		INSERT INTO TB_USER (USER_ID, USER_PW, USER_NAME, USER_GENDER, USER_AGE,
		JOINED_AT)
		VALUES (#{userId}, #{userPw}, #{userName}, #{userGender}, #{userAge},
		CURRENT_TIMESTAMP);
	</insert>

	<!-- ã„´tb_user -->


	<select id="getAllPosts" resultType="com.smhrd.model.postVO">
		SELECT * FROM tb_post
	</select>


	<insert id="insertPost" parameterType="com.smhrd.model.postVO"
		useGeneratedKeys="true" keyProperty="postIdx">
		INSERT INTO tb_post (post_title, post_content, post_file, created_at,
		post_views, post_likes, user_id, comm_idx)
		VALUES (#{postTitle}, #{postContent}, #{postFile}, CURRENT_TIMESTAMP, 0, 0,
		#{userId}, #{commIdx})
	</insert>

	<delete id="deletePost" parameterType="int">
		DELETE FROM tb_post WHERE
		post_idx = #{postIdx}
	</delete>

</mapper>